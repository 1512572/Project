<div class="content container mt-3 mb-3">
    <table id="myTable" class="table table-hover">
        <thead>
            <tr>
                <th scope="col" data-toggle="tooltip" title="Click để sắp xếp">Người nhận</th>
                <th scope="col" data-toggle="tooltip" title="Click để sắp xếp">Ngày đặt</th>
                <th scope="col" data-toggle="tooltip" title="Click để sắp xếp">Tổng tiền</th>
                <th scope="col" data-toggle="tooltip" title="Click để sắp xếp">Tình trạng</th>
            </tr>
        </thead>
        <link rel='stylesheet' href='/stylesheets/pagination.css' />
        <tbody id="orders-holder">
        </tbody>
            <div id="pagination" class="ml-auto mr-auto justify-content-center text-center mb-5 pag mt-3"></div>
            <script src="/javascripts/pagination.min.js"></script>
            <script>
                var orderList = [];
                {{#each orders }}
                var obj = new Object();
                obj.status = '{{this.status}}';
                obj.added = '{{this.added}}';
                obj.id = '{{this._id}}';
                obj.name = '{{this.name}}';
                obj.amount = '{{this.cart.totalPrice}}';
                orderList.push(obj);
                {{/each}}
                var options = {
                    dataSource: orderList,
                    pageSize: 5,
                    callback: function (data, pagination) {
                        var dataHtml = '';
                        for (var i = 0; i < orderList.length; i++) {
                            dataHtml += '<tr>';
                            dataHtml += '<td class="clickable-row" data-href="/users/view-order-detail/' + orderList[i].id + '" data-toggle="tooltip" title="Click để xem chi tiết" scope="row">';
                            dataHtml += orderList[i].name + '</td>';
                            dataHtml += '<td class="clickable-row" data-href="/users/view-order-detail/' + orderList[i].id + '" data-toggle="tooltip" title="Click để xem chi tiết">';
                            let dateDate =  new Date(orderList[i].added);
                            let year = dateDate.getFullYear().toString();
                            let month = dateDate.getMonth().toString();
                            if (month.length < 2)
                                month = '0' + month;
                            let day = dateDate.getDate().toString();
                            if (day.length < 2)
                                day = '0' + day;
                            let dateAdded = year + '/' + month + '/' + day;
                            dataHtml += dateAdded + '</td>';
                            dataHtml += '<td class="clickable-row" data-href="/users/view-order-detail/' + orderList[i].id + '" data-toggle="tooltip" title="Click để xem chi tiết">';
                            dataHtml += orderList[i].amount + ' VNĐ' + '</td>';
                            dataHtml += '<td>';
                            dataHtml += '<div class="dropdown">';
                            let twoStatus;
                            let oneStatus;
                            if (orderList[i].status == 1) {
                                oneStatus = 'Đang xử lí';
                                twoStatus = ['Hoàn thành', 'Đã hủy'];
                            }
                            if (orderList[i].status > 1) {
                                oneStatus = 'Hoàn thành';
                                twoStatus = ['Đang xử lí', 'Đã hủy'];
                            }
                            if (orderList[i].status < 1) {
                                oneStatus = 'Đã hủy';
                                twoStatus = ['Đang xử lí', 'Hoàn thành'];
                            }
                            dataHtml += '<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">';
                            dataHtml += oneStatus;
                            dataHtml += '</button>';
                            dataHtml += '<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">';
                            dataHtml += '<a class="dropdown-item" href="#">';
                            dataHtml += twoStatus[0];
                            dataHtml += '</a>';
                            dataHtml += '<a class="dropdown-item" href="#">';
                            dataHtml += twoStatus[1];
                            dataHtml += '</a>';
                            dataHtml += '</div>';
                            dataHtml += '</div>';
                            dataHtml += '</td>';
                            dataHtml += '</tr>';
                        }
                        $('#orders-holder').html(dataHtml);
                    }
                };
                $('#pagination').pagination(options); 
            </script>
    </table>
</div>